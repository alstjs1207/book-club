# TIL (2024.09.26)

## DAY 3

오늘 읽은 범위:

6장) 의존 관계의 예

---

```text
😉 책에서 기억하고 싶은 내용을 써보세요.
```

코드를 쓰는 것 보다 읽는 것에 개발시간을 더 많이 할애합니다.  
그렇기 때문에 가독성을 높여야 생산성을 올릴 수 있습니다.

코드를 얼마나 오랜 기간 동안 남겨 두고 싶은지가 가독성을 위해 들여야 할 비용과 관계됩니다.  
코드 작성 후 테스트를 작성하고, 리팩토링 -> 지금 당장 시간을 조금만 투자하면 코드를 마주할 미래의 개발자를 구제할지도 모릅니다.

### 의존 관계를 적절하게 다루는 방법

결합도, 의존 방향, 중복, 명시성

결합도  
내용 결합, 공통 결합, 외부 결합은 가능한 한 사용하지 않는 것이 좋습니다.
호출할 순서가 정해져 있는 함수들을 의존 대상으로 묶어 은닉한다.

제어 결합: 무엇을 할 것인지 결정하는 값(플래그 등)을 전달하여 호출 대상의 동작을 변경하는 경우에 발생합니다.  
함수를 분리하면 동작을 이해하기 위해 관련 없는 조건 분기 코드를 읽지 않아도 되므로 결과적으로 의존 관계가 더 명확해지고 분할된 함수들의 이름도 더욱 구체화됩니다. 또 호출하는 쪽의 코드만 읽어도 함수의 동작을 파악할 수 있습니다.

스탬프 결합과 데이터 결합 : 함수의 인수나 반환값으로 값을 전달할 때, 그리고 그것이 제어 결합이 아닐 때 발생합니다.  
이 중에서 타입에 제약을 두거나 의미를 부여하려는 경우가 중요하다.  
스탬프 결합 중 외부 정의 데이터의 경우 외부 정의 데이터를 코드 내부에서 재정의된 모델 클래스로 변경해서 사용해야 한다.

### 의존 방향

의존 방향은 가능한 한 한쪽으로만 유지하는 것이 좋다.  
그러나 의존 관계에서 순환을 완전히 없애는 것은 소프트웨어 개발에서 매우 어려운 일이다.  
다만, 의존 방향을 결정하는 기준이 있다면, 순환을 없애거나 축소할 수 있다.

호출자 -> 호출 대상
구체적 -> 추상적
복잡 -> 단순
가변 -> 불변
알고리즘 -> 데이터 모델
사양 변경이 많음 -> 사양 변경이 적음

의존 대상을 최소화하기 위해서는 작은 클래스로 추출하여 방향을 단방향으로 바꿀 수가 있다.

### 의존의 중복

공통 코드를 추출하는 것만으로도 이러한 의존 관계의 중복이 발생하는건 피할 수 없다.  
의존 중복의 대표적인 사례 : 연결된 의존 관계, 의존 대상 집합의 중복

연결된 의존 관계: 단순히 참조를 전달받기 위한 이유로 서로 관련없는 클래스가 의존해서는 안된다.  
디미터의 법칙 : 메서드 내에서 객체의 멤버에 접근할 때 수신 객체는다음 중 하나로 제한되어야 한다.  
의존 대상 집합의 중복: 중간 레이어를 생성하여 각각의 의존 대상들을 숨기도록 한다. 단, 은닉한 의존 대상을 공개해서는 안된다.

### 의존의 명시성

암묵적 의존 관계 : 다형성, 클래스로 명시되지 않은 데이터 형식, 인수나 반환값이 취할 수 있는 값의 범위, 코드 복사  
결합도를 낮추려고 의존 관계를 암묵적으로 만들어버리면 오히려 가독성이나 견고함에 악영향을 끼칠 수도 있다.

# TIL (2023.05.31)

## DAY 8

오늘 읽은 범위: 시작 - 3장) 타입 추론 - 아이템19 ~ 아이템 21

---

```
😉 책에서 기억하고 싶은 내용을 써보세요.
```

- 타입스크립트가 어떻게 타입을 추론하는지, 언제 타입 선언을 작성해야 하는지, 타입 추론이 가능하더라도
  명시적으로 타입 선언을 작성하는 것이 필요한 상황은 언제인지 잘 이해할 수 있을 것입니다.(p.107)

### 아이템 19 추론 가능한 타입을 사용해 장황한 코드 방지하기

- 타입 추론이 된다면 명시적 타입 구문은 필요하지 않습니다. 오히려 방해가 될 뿐입니다.(p.108)
- 비구조화 할당문은 모든 지역 변수의 타입이 추론되도록 합니다. 여기에 추가로 명시적 타입 구문을 넣는다면
  불필요한 타입 선언으로 인해 코드가 번잡해집니다.(p.111)

```
function logProduct(product: Product) {
  const {id, name, price} = product;
  console.log(id, name, price);
}
```

- 정보가 부족해서 타입스크립트가 스스로 타입을 판단하기 어려운 상황도 일부 있습니다. 그럴 때는 명시적 타입 구문이 필요합니다.
- 함수의 반환에도 타입을 명시하여 오류를 방지할 수 있습니다. 타입 추론이 가능할지라도 구현상의 오류가 함수를 호출한 곳까지 영향을
  미치지 않도록 하기 위해 타입 구문을 명시하는게 좋습니다.(p.113)
- 반환 타입을 명시하면, 구현상의 오류가 사용자 코드의 오류로 표시되지 않습니다.(p.114)
- 반환 타입을 명시하는 이유
  - 함수에 대해 더욱 명확하게 알 수 있다.
  - 더욱 직관적인 표현 : 타입에 대한 주석을 작성할 수 있다.
- no-inferrable-types: 작성된 타입 구문이 정말로 필요한지 확인(p.115)

### 아이템 20 다른 타입에는 다른 변수 사용하기

- 자바스크립트에서는 한 변수를 다른 목적을 가지는 다른 타입으로 재사용해도됩니다.
  but 타입 스크립트는 "변수의 값은 바뀔 수 있지만, 그 타입은 보통 바뀌지 않는다"는 중요한 관점.(p.116)
- 다른 타입에는 별도의 변수를 사용하는 게 바람직한 이유
  - 서로 관련이 없는 두 개의 값을 분리합니다.
  - 반수명을 더 구체적으로 지을 수 있습니다.
  - 타입 추론을 향상시키며, 타입 구문이 불필요해집니다.
  - 타입이 좀 더 간결해집니다.
  - let 대신 const로 변수를 선언하게 됩니다. const로 변수를 선언하면 코드가 간결해지고, 타입 체커가 타입을 추론하기에도 좋습니다.
- 혼란을 막기위해 가려지는(shadowed) 변수는 사용하지 않도록 한다.

```
// 두 id는 서로 아무런 관계가 없습니다.
const id = '12-23';
{
  const id = 123;
}
```

### 아이템 21 타입 넓히기

- 변수는 '가능한'값들의 집합인 타입을 가집니다. 상수를 사용해서 변수를 초기화할 때 타입을 명시하지 않으면
  타입 체커는 타입을 결정해야 합니다. 이말은 지정된 단일 값을 가지고 할당 가능한 값들의 집합을 유추해야 한다는 뜻입니다.
  타입스크립트에서는 이러한 과정을 `넓히기(widening)`라고 부릅니다.(p.119)
- 넓히기 과정을 제어할 수 있는 방법

  - `const` 사용
  - `명시적 타입 구문` 제공
  - `const 단언문(as const)` 사용

- const 단언문은 온전히 타입 공간의 기법입니다.(p.122)
- 값 뒤에 as const를 작성하면, 타입스크립트는 최대한 좁은 타입으로 추론합니다.(p.123)

```
const a1 = [1 ,2, 3]; // number[];
const a2 = [1, 2, 3] as const; // readonly [1, 2, 3];
```

```
🤔 오늘 익은 소감은? 떠오르는 생각을 가볍게 적어보세요
```

- 명시적으로 표현하지 않고 타입 추론을 믿어야 할지는 고민이 필요하다. 물론 타입 추론을 사용한다면 장황한 코드가 간결해 지는것은 자명하다.
- 개인적으로 자바스크립트와 큰차이를 보이며 편한 기능 중 하나인 `다른 타입에는 다른 변수 사용하기` 인 것 같습니다.

```
궁금한 내용이 있거나, 잘 이해되지 않는 내용이 있다면 적어보세요.
```

- no-inferrable-types: 숫자, 문자열 또는 부울로 초기화된 변수 또는 매개변수에 대한 명시적 유형 선언을 허용하지 않습니다.
